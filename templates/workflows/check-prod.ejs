# rendered by https://www.npmjs.com/package/github-actions-checks
name: Check production
on:
  push:
    branches:
      - stable
      - master
    tags:
      - v**

<% if (typeof env !== "undefined") { %>env:<% Object.entries(env).forEach(([key, value]) => { %>
  <%- key %>: <%- value %><% }) %>
<% } %>

jobs:
  <% jobs.forEach((job) => { %>
  <%- job.key %>:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Preparing
        uses: ./.github/actions/check-install

      <% job.steps.forEach((step) => { %>
      - name: <%- step.name %>
        id: <%- step.key %>
        if: always()
        uses: ./.github/actions/check-run
        with:
          script: <%- step.command %>
      <% }) %>
  <% }) %>
